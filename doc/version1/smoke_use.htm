<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Chapter 10</title>
</head>

<body>

<h1><a name="Chapter_10_use"></a>Chapter 10. Using SMOKE: Scripts,
Models-3, and EDSS</h1>
<h2>Contents</h2>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#Introduction">Introduction</a></p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#UNIX_Scripts">UNIX Scripts</a></p>
<p class="MsoNormal" style="margin-left:.75in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#m3demo">M3demo case</a></p>
<p class="MsoNormal" style="margin-left:.75in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#net96">Net96 case</a></p>
<p class="MsoNormal" style="margin-left:.75in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#create_scripts">Creating your own scripts</a></p>
<p class="MsoNormal" style="margin-left:.75in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#change_aqm">Changing configurations for different air
quality models</a></p>
<p class="MsoNormal"><!--[if gte vml 1]><v:line id="_x0000_s1026" style='position:absolute;
 z-index:1' from="0,12pt" to="468pt,12.05pt" o:allowincell="f" strokecolor="#d4d4d4"
 strokeweight="1.75pt">
 <v:shadow on="t" origin=",32385f" offset="0,-1pt"/>
</v:line><![endif]-->
<span style="mso-ignore:vglayout;position:
relative;z-index:0;left:-3px;top:12px;width:631px;height:20px"><img src="smoke_32.gif" v:shapes="_x0000_s1026" width="631" height="8"></span>&nbsp;<o:p>
</o:p>
</p>
<br style="mso-ignore:vglayout" clear="ALL">
<h2><a name="Introduction"></a>Introduction</h2>
<p class="MsoNormal">The current version of SMOKE can be run from three
environments: UNIX scripts, the Models-3 system, and the Environmental Decision
Support System (EDSS). The current version of this chapter deals only with the
first method: UNIX scripts. In the future, this chapter will be expanded to
include information about running from Models-3 and from EDSS, as well as from
Windows .BAT files.</p>
<p class="MsoNormal"><span style="display:none;mso-hide:all">[<a href="#Chapter_10_use">Return
to top</a>]<o:p>
</o:p>
</span></p>
<h2><a name="UNIX_Scripts"></a>UNIX Scripts</h2>
<p class="MsoNormal">UNIX scripts are useful for running SMOKE because they
provide the ultimate flexibility. Users can manipulate all of the SMOKE options
from these scripts, and even write their own scripts to include I/O API
utilities and regroup the SMOKE programs into different processing arrangements.
For example, although the default SMOKE scripts are grouped by source
categories, users are free to create their own scripts that run SMOKE as
“inventory steps,” “per-month steps”, and “per-day steps” if
desired.</p>
<p class="MsoNormal">The downside of UNIX scripts is that you have to know
something about UNIX to be able to use them most effectively. For those users
who are not UNIX savvy, the Models-3 and EDSS options might be the best way to
go. Unfortunately, we do not have documentation on these methods at this time.</p>
<p class="MsoNormal">All SMOKE UNIX scripts can be found in the $SMKROOT/scripts/run
directory, or simply the $SCRIPTS/run directory (after having invoked the
Assigns file). The sample REPCONFIG files (needed for Smkreport), can be found
in $SCRIPTS/configure.</p>
<h3><a name="m3demo">M3demo case</a></h3>
<p class="MsoNormal">The “m3demo” case was originally designed to be release
with Models-3; hence the name “m3demo”. We have also release this case as a
stand alone version for users who wish to use SMOKE outside of the Models-3
framework. This case serves as a benchmark for the SMOKE system; users should
use the scripts for this case to ensure that SMOKE is running properly on their
system. CPU times are given for this case for an SGI and a Sun configuration in <a href="smoke_compile.html">Chapter
12: Compiling and Performance</a>.</p>
<p class="MsoNormal"><b>The m3demo case uses old data</b>, and we therefore no
longer recommend that users start with the m3demo Assigns file and scripts when
customizing scripts for their own usage. The net96 case (below) is better suited
for such usage. The m3demo case is a 1-day case over the Eastern US, using a
36-km Lambert projection covering the domain shown below.</p>
<p class="MsoNormal" align="center" style="text-align:center"><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:327pt;
 height:275.25pt'>
 <v:imagedata src="file:///C:/DOCUME~1/bergen/LOCALS~1/Temp/msoclip1/01/clip_image002.png"
  o:title=""/>
</v:shape><![endif]-->
<img border="0" src="smoke_31.jpg" v:shapes="_x0000_i1025" width="436" height="367"></p>
<p class="MsoNormal">The inventory used for m3demo is pared down to the region
covered by the grid, to help the test case run faster. All emission inventory
formats are in Inventory Data Analyzer (IDA) format. The output created is for
the CMAQ model for CB-IV speciation with PM2.5 speciation as well. However,
mobile sources are only run with CO, NOx, and VOC, but not for SO2, NH3, PM10,
and PM2.5. Area and point source use all 7 pollutants previously mentioned.
Biogenics runs only for NOx and VOC, which is what is available from BEIS-2
(which SMOKE reproduces).</p>
<p class="MsoNormal" style="page-break-after:avoid">The following steps and
scripts are for the m3demo case:</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Area
emissions 1995 base case</b>: smk_ar_m3demo.run.<br>
This script runs Smkinven (inventory import), Grdmat (grdding), Spcmat
(speciation), Temporal (hourly allocation), Smkmerge (merging of SMOKE
intermediates), and Smkreport (reporting) for area sources in 1995, the base
year for this case. Smkreport is run for the “state” configuration of the
example REPCONFIG files, for which state totals are given for each stage of the
area-source processing (inventory import, import + gridding, import +
speciation, import + hourly allocation, full merge).</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Area
emissions 2007 projection and 2007 merge</b>: smk_ar_m3demo-07.run.<br>
This script runs Cntlmat (for projection matrix creation), Grwinven (for
inventory projection to 2007), Temporal (for 2007 hourly allocation), and
Smkmerge (to create model-ready files). This scripts does not rerun Grdmat or
Spcmat, because the matrices created from these steps are independent on the
future year.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Biogenic
emissions</b>: smk_bg_m3demo.run.<br>
This script runs Rawbio (for landuse import), Tmpbio (for temporal allocation
and speciation of biogenic emission), and Smkmerge (for biogenic reporting). The
landuse for the m3demo case is simply county-total landuse, which is gridded
based on the “area” gridding surrogate.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Biogenic
emissions</b>: smk_beis3_m3demo.run.<br>
This script runs Normbeis3 (for landuse import), Beis3 (for temporal allocation
and speciation of biogenic emission), and Smkmerge (for biogenic reporting). The
landuse for the m3demo case is gridded landuse in netCDF.<span style="mso-spacerun: yes">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Mobile
VMT and emissions 1995 base case</b>: smk_mb_m3demo_vmt.run.<br>
This script runs Smkinven (for VMT import), Spcmat, Grdmat, Premobl (for
temperature preprocessing), Emisfac (for emission factor generation with
Mobile5b), Temporal (for combining hourly temperatures, emission factors, and
VMT to create hourly emissions), Smkmerge, and Smkreport. Smkreport is run for
the “state” configuration, as described for area sources above.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Mobile
2007 projection (without merge)</b>: smk_mb_m3demo_vmt-07.run.<br>
This script runs Cntlmat (for project matrix creation for VMT) and Grwinven (for
future-year growth of VMT). It does not run Emisfac, Temporal, or Smkmerge for
2007 because the Mobile5b 2007 inputs were not available in time for this
release. Unfortunately, mobile speeds are also grown to the future year with the
same factor as mobile VMT, making the future-year speeds wrong.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt;tab-stops:
195.75pt"><b>Point emissions 1995 base case</b>: smk_pt_m3demo.run.<br>
This script runs Smkinven, Grdmat, Spcmat, Elevpoint (for identification of the
elevated sources), Laypoint (for plume rise computations), Temporal, Smkmerge,
and Smkreport. Smkreport is run for the “state” configuration, as described
for area sources above. Laypoint takes the place of the Models-3 ECIP step for
computing layer fractions for input to CMAQ and MAQSIP.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Point
2007 projection and 2007 merge</b>: smk_pt_m3demo-07.run.<br>
This script runs Cntlmat, Grwinven, Temporal, and Smkmerge to create the 2007
model-ready point source emissions.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>All
sources merge for CMAQ inputs</b>: smk_mrgall_m3demo_l.run.<br>
This script runs Smkmerge for all source categories at the same time to create
the model-ready all-category emission files in units of moles/s for CMAQ. This
script duplicates some the Smkmerge processing from the area, mobile, and point
scripts, and could be replaced with a script that uses Mrggrid to combine the
model-ready files created by the area, biogenic, mobile, and point scripts. To
do this, users would have to set MRG_GRDOUT_YN to “Y” in the biogenics
script, and ensure that the output units from the biogenic Smkmerge step were
moles/s.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>All
sources merge for state reports</b>: smk_mrgall_m3demo_s.run.<br>
This script runs Smkmerge for all source categories at the same time to recreate
state-totals. This script is the only way to get all-category merged emissions
reports, and this is why we have included it. Smkreport can only create reports
for one source category at a time. This sort of script is useful to ensure that
the all-category totals output from Smkmerge include emissions from all source
categories.</p>
<p class="MsoNormal"><span style="display:none;mso-hide:all">[<a href="#Chapter_10_use">Return
to top</a>]<o:p>
</o:p>
</span></p>
<h3><a name="net96">Net96 case</a></h3>
<p class="MsoNormal">The “net96” case was designed to provide users with a
SMOKE example using the best data available. This case uses the National
Emission Inventory (NEI), version 3.11. The ancillary files provided with this
case (e.g., profiles, x-refs, and surrogates) have been tested by MCNC to work
properly with the NEI, version 3.11. One limitation of the data we have provided
is that the mobile emissions data are provided and not the VMT. Future releases
will include the VMT data and the ancillary files (MPLIST and MPREF) needed for
running the NEI based on VMT and meteorology data. CPU times are given for this
case for an SGI configuration only in <a href="smoke_compile.html">Chapter
12: Compiling and Performance</a>.</p>
<p class="MsoNormal">We recommend that users start with the net96 Assigns file
and scripts when customizing scripts for their own usage. The net96 case is a
1-day case over the whole US, using a 36-km Lambert projection covering the
domain shown below.</p>
<p class="MsoNormal">&nbsp;<o:p>
</o:p>
</p>
<p class="MsoNormal" align="center" style="text-align:center"><!--[if gte vml 1]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:453pt;height:312pt'>
 <v:imagedata src="file:///C:/DOCUME~1/bergen/LOCALS~1/Temp/msoclip1/01/clip_image004.png"
  o:title=""/>
</v:shape><![endif]-->
<img border="0" src="smoke_32.jpg" v:shapes="_x0000_i1026" width="604" height="416"></p>
<p class="MsoNormal">The pollutants available in the NEI are CO, NOx, VOC, SO2,
NH3, PM10, and PM2.5. SMOKE computes PMC from the PM10 and PM2.5 values, which
is set as an option to the Smkinven program in the scripts. All inventory inputs
are in IDA format.</p>
<p class="MsoNormal" style="page-break-after:avoid">The following steps and
scripts are for the net96 case:</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Area
emissions 1996 base case</b>: smk_ar_net96.run.<br>
This script runs Smkinven (inventory import), Grdmat (grdding), Spcmat
(speciation), Temporal (hourly allocation), Smkmerge (merging of SMOKE
intermediates), and Smkreport (reporting) for area sources in 1996, the base
year for this case. Smkreport is run for the “state” configuration of the
example REPCONFIG files, for which state totals are given for each stage of the
area-source processing (inventory import, import + gridding, import +
speciation, import + hourly allocation, full merge).</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Biogenic
emissions</b>: smk_bg_net96.run.<br>
This script runs Rawbio (for landuse import), Tmpbio (for temporal allocation
and speciation of biogenic emission), and Smkmerge (for biogenic reporting). The
landuse for the net96 case is gridded landuse, instead of county-total landuse
used with the m3demo case.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>Mobile
emissions 1996 base case</b>: smk_mb_net96.run.<br>
This script runs Smkinven (for emissions import), Spcmat, Grdmat, Temporal,
Smkmerge, and Smkreport. Smkreport is run for the “state” configuration, as
described for area sources above. No VMT is run for this case; only the mobile
emissions from the NEI are used.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt;tab-stops:
195.75pt"><b>Point emissions 1996 base case</b>: smk_pt_net96.run.<br>
This script runs Smkinven, Grdmat, Spcmat, Temporal, Smkmerge, and Smkreport.
Smkreport is run for the “state” configuration, as described for area
sources above. Laypoint takes the place of the Models-3 ECIP step for computing
layer fractions for input to CMAQ and MAQSIP.</p>
<p class="MsoNormal" style="margin-left:45.0pt;text-indent:-27.0pt"><b>All
sources merge for CMAQ inputs</b>: smk_mrgall_net96.run.<br>
This script runs Smkmerge for all source categories at the same time to create
the model-ready all-category emission files in units of moles/s for CMAQ.</p>
<p class="MsoNormal"><span style="display:none;mso-hide:all">[<a href="#Chapter_10_use">Return
to top</a>]<o:p>
</o:p>
</span></p>
<p class="MsoNormal">&nbsp;<o:p>
</o:p>
</p>
<h3><a name="create_scripts">Creating your own scripts</a></h3>
<p class="MsoNormal">To create your own scripts, you must typically take the
following steps:</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Copy the ASSIGNS.net96.us36 assigns file to your own copy</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Modify the necessary features of the Assigns file for your case.
For example, change the scenario names, episode dates, duration, grid name, or
speciation name. Some of these changes require additional input files. More
details about the steps needed for preparing input files for SMOKE are available
in the SMOKE training slides. See the <a href="train_smk_pt6.ppt">Problem
Solving</a> presentation available from the on-line index for more information
on these steps.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Copy the appropriate net96 scripts to your own scripts, change the
Assigns file listed in the script to the one that you created in the previous
step, and change the options as needed based on <a href="smoke_programs.html">Chapter
7: SMOKE Core Programs</a>, as well as based on the information in the next
section of this chapter.</p>
<p class="MsoNormal"><span style="display:none;mso-hide:all">[<a href="#Chapter_10_use">Return
to top</a>]<o:p>
</o:p>
</span></p>
<p class="H3"><a name="change_aqm"></a>&nbsp;<o:p>
</o:p>
</p>
<h3>Changing configurations for different air quality models</h3>
<p class="MsoNormal">In this section, we attempt to give a basic outline of the
considerations for script reconfiguration needed for SMOKE output for various
models. This version of SMOKE supports CMAQ, MAQSIP, UAM-IV, UAM-V, CAM<sub>X </sub>(no
toxics), REMSAD (no toxics), and UAM-AERO. We have tested and used SMOKE for all
of these configurations, although we are not able to provide all of the scripts
for these cases at this time. Furthermore, the SMOKE installation currently
provides data for only CMAQ speciation for the CB-IV and RADM2 chemical
mechanisms. Look for future data releases for other speciation profiles in
SMOKE. It is possible for users to create their own speciation profiles file, or
make a request of other SMOKE users for such data.</p>
<p class="MsoNormal">Most of the options that affect model output format deal
with the Elevpoint, Smkmerge, and Smk2emis programs. The input speciation
profiles used in Spcmat also impact the final model-ready files, because SMOKE
outputs the species that are provided in the GSPRO file. The gridded inputs used
by Grdmat as well as the gridded meteorology inputs need to be consistent with
the output grid SMOKE grid and grid projection.</p>
<p class="MsoNormal">All models require Smkmerge to be configured for outputting
gridded data, with speciation, and with hourly emissions.</p>
<h4><span style="mso-bidi-font-weight:bold">CMAQ<o:p>
</o:p>
</span></h4>
<p class="MsoNormal">The SMOKE “net96” case is configured to run for CMAQ.
CMAQ requires a I/O API NetCDF 3d, gridded, hourly, model-species file, which
can contain species for the CB-IV mechanism, the RADM2 mechanism, and can
optionally take speciated PM2.5 as well as other primary particulate data such
as SO2, NH­­­<sub>3</sub>, and PMC. The “net96” scripts provided with
SMOKE give output for the CB-IV with speciated PM2.5.</p>
<p class="MsoNormal">Users can get CMAQ-ready files by:</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Using a CMAQ speciation profile file</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Using a Lambert projection for all gridded input files</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Optionally running Elevpoint if (1) user want to identify specific
elevated sources, and/or (2) if user wants to identify plume-in-grid (PinG)
sources and output PinG files for CMAQ.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Run Laypoint for plume rise (takes the place of CMAQ’s ECIP)</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Run Smkmerge with layer-fractions merge, gridded outputs for
“moles/s”, and optionally with PinG outputs. SMOKE will automatically output
units of “g/s” for PM pollutants that cannot be converted to moles.</p>
<h4>MAQSIP</h4>
<p class="MsoNormal">SMOKE outputs for MAQSIP are very similar to those of CMAQ.
The major differences to consider are:</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Use a MAQSIP-specific speciation profile</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Smkmerge output units of “moles/hr”.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Public versions of MAQSIP may not support plume-in-grid.</p>
<p class="MsoNormal">&nbsp;<o:p>
</o:p>
</p>
<h4>UAM-IV</h4>
<p class="MsoNormal">To output for UAM-IV, a different approach for elevated
point sources is required, and an extra conversion step is needed. Users can get
UAM-IV-ready files by:</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Constrain pollutants processed by SMOKE to only those readable by
UAM-IV (usually, CO, NO<sub>x</sub>, and VOC) by editing the sipols.txt file in
the $INVDIR directory, or by providing an inventory with only those pollutants.
Other pollutants can be used if UAM-IV is configured to accept those data.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Use a UAM-specific speciation profile. The CB-IV speciation
profile provided with SMOKE for CMAQ may be useful, but it does not contain MEOH
or ETOH.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Use a UTM projection for all gridded inputs and meteorology.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Run Elevpoint with the RISE instruction in the PELVCONFIG file and
using a non-zero criteria for plume rise cutoff (user-defined). SMOKE will use a
quick calculation based on the Briggs formula for computing plume rise with
meteorology assumed. Sources with plume rise greater than the cutoff height will
be flagged for elevated processing by Smkmerge. Alternatively, you can use other
elevated or PinG criteria in the PELVCONFIG file if you desire some other
selection method besides the traditional cutoff method.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Smkmerge configured to merge without layer fractions, output units
of “gm moles/hr”, and to output an elevated ASCII file. There are a large
number of options in the Smkmerge documentation that allow users to set the
header information in the ASCII elevated file. Smkmerge will also create a 2-d
merged emissions file in I/O API NetCDF format.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Run Smk2emis on the 2-d I/O API NetCDF file. This step can be
added the script using a RUN_SMK2EMIS setting and ensuring the Smk2emis input
and output environment variables are also set by the script (in the environment
variable override section – after the Assigns file is invoked, but before
smk_run.scr is called). Smk2emis create the UAM-IV binary “EMISSIONS” file.
If the output files are not appearing in the OUTPUT directory, it may be because
the environment variable used by Smk2emis is not getting set by the SMOKE
scripts. Check the Smk2emis log file to check if this is the case.</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Run the PTSRCE program provided with UAM-IV with the ASCII
elevated file from Smkmerge as input.</p>
<p class="MsoNormal">&nbsp;<o:p>
</o:p>
</p>
<h4>UAM-V, CAM<sub>X<o:p>
</o:p>
</sub></h4>
<p class="MsoNormal">The processing for UAM-V and CAM<sub>X</sub> is much like
that for UAM-IV. The pollutants, grids, layer structures, and chemical
mechanisms that these models can use are more varied than for UAM-IV. The SMOKE
settings and inputs must be adjusted to accommodate these differences.</p>
<h4 style="mso-pagination:widow-orphan">REMSAD</h4>
<p class="MsoNormal">The processing for REMSAD is much like that for UAM-IV.
REMSAD can input a number of different pollutants, but it has only been tested
with SMOKE for PM inputs (not with TOXIC inputs). Additionally, the REMSAD
version that is currently available only inputs total VOC (not speciated VOC),
and will therefore requires REMSAD-specific speciation profiles file.</p>
<p class="MsoNormal">&nbsp;<o:p>
</o:p>
</p>
<h4>UAM-AERO</h4>
<p class="MsoNormal">The processing for UAM-AERO is much like that for UAM-IV.
The pollutants expected by UAM-AERO are very different from those of UAM-IV, and
in fact, the type of variable names UAM-AERO expects (with plusses, minuses, and
periods) are prohibited in the NetCDF library. So, in order to output UAM-AERO
format, users must configure as for UAM-IV, plus:</p>
<p class="MsoNormal" style="margin-left:.5in;text-indent:-.25in;mso-list:l0 level1 lfo1"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The Smk2emis program must be configured to use the variable name
mapping option and the VNAMMAP file. Users can use this option to map the I/O
API variable names from the 2-d Smkmerge output to new names in the EMISSIONS
file created by Smk2emis. The ASCII elevated file variable names must be changed
manually before running through PTSRCE.</p>
<p class="MsoNormal"><span style="display:none;mso-hide:all">[<a href="#Chapter_10_use">Retur<span style="mso-bookmark:_Hlt482344314">n</span>
t<span style="mso-bookmark:_Hlt482345315">o</span> top</a><a name="_Hlt482345321"></a><a name="_Hlt482345315"></a><a name="_Hlt482344314"></a>]<o:p>
</o:p>
</span></p>

</body>

</html>
