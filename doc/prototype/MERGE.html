
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML> 
<HEAD>
<TITLE> 
    Merge Processing and the Generation of AQM-ready Emissions
</TITLE>
</HEAD>
   
<BODY>
<H1>
    Merge Processing and the Generation of AQM-ready Emissions
</H1>

<VAR>!! under construction !!</VAR>

<H2> Contents </H2>
<UL>
    <LI>  <A HREF = "#over"> Processing: Overview and Principles </A>
        <UL>
            <LI>  <A HREF = "#edss"> Three-Dimensional Merge Processing 
                                     for EDSS </A>  
            <LI>  <A HREF = "#uaml"> Lower-level Merge Processing for UAM </A>  
            <LI>  <A HREF = "#uamu"> Upper-level Merge Processing for UAM </A>  
        </UL>
    <LI>  <A HREF = "#programs"> Program Specifications </A>
    <LI>  <A HREF = "#dataset">  Merge Processing Data Set Definitions </A>
    <LI>  <A HREF = "#cdataset"> Data Set Definitions Common to Multiple
Submodels</A>
</UL>

<HR> <!---->

<H2><A NAME = "over"> Processing: Overview and Principles </A></H2>

    There are two main paths of merge processing:  that for UAM, which
    has separate treatment of upper-level and lower-level parts, and 
    that for EDSS, which has a single unified three-dimensional
    treatment.  Data flow diagrams giving an overview of the main 
    line of SMOKE processing for UAM, ROM, and similar models are 
    available in
    <A HREF = "figs/OVERVIEW.UAM.ps">Postscript</A>, in
    <A HREF = "figs/OVERVIEW.UAM.gif">GIF</A>, in
    <A HREF = "figs/OVERVIEW.UAM.xbm">X bitmap</A>, and in
    <A HREF = "figs/OVERVIEW.UAM.jpg">JPEG</A>; 
    and also for EDSS and other highly-layered air quality modeling in
    <A HREF = "figs/OVERVIEW.EDSS.ps">Postscript</A>, in
    <A HREF = "figs/OVERVIEW.EDSS.gif">GIF</A>, in
    <A HREF = "figs/OVERVIEW.EDSS.xbm">X bitmap</A>, and in
    <A HREF = "figs/OVERVIEW.EDSS.jpg">JPEG</A>.  Note that additional
    options for analysis and quality assurance processing are detailed
    under the specific source categories detailed in the sections on
    the various <A HREF = "index.html#models">sub-models</A>.
    <P> 


<H3><A NAME = "edss"> 
Three-Dimensional (Upper Level) Merge Processing for EDSS </A></H3>

    First, program <A HREF = "POINT.html#LAYPOINT">LAYPOINT</A> is used to 
    compute the layered point source plume rise fractions file 
    <A HREF = "POINT.html#PLAY">PLAY </A> for the time period of interest, 
    on the basis of stack parameters from the 
    <A HREF = "POINT.html#PNTS">PNTS</A> inventory file and meteorology from 
    <A HREF = "MET.html">EDSS meteorology files.</A>
    <P> 

    Then program <A HREF = "#CSGLMERGE">CSGLMERGE</A> prompts the
    user for, and reads in together the gridding matrices 
    <A HREF = "AREA.html#AGMAT">AGMAT</A> and 
    <A HREF = "POINT.html#PGMAT">PGMAT</A>, the speciation matrices
    <A HREF = "AREA.html#ASMAT">ASMAT</A> and 
    <A HREF = "POINT.html#PSMAT">PSMAT</A>, and optionally the control
    matrices <A HREF = "AREA.html#ACMAT">ACMAT</A> and 
    <A HREF = "POINT.html#PCMAT">PCMAT</A>, and multiplies them together to 
    form the composite point and area source transform matrices.  
    In order not to use a control matrix in the composite transform 
    matrix, , the user should respond &quot;NONE&quot; to the prompt 
    for it.
    <P> 

    For each time step, CSGLMERGE then reads the source level emissions
    from <A HREF = "AREA.html#ATMP">ATMP</A> and 
    <A HREF = "POINT.html#PTMP">PTMP</A> and the plume layer fractions from
    <A HREF = "POINT.html#PLAY">PLAY</A>, multiplies them together by the
    composite transform matrices, merges the results together, and
    writes them out to three-dimensional layered model ready emissions 
    files <A HREF = "#EMIS3D">EMIS3D or EMISC3D</A>.  Alternatively, the 
    user may use the inventory files <A HREF = "AREA.html#AREA">AREA</A> and 
    <A HREF = "POINT.html#PNTS">PNTS</A> in order to construct three-dimensional 
    layered annual total files for analysis and quality assurance purposes, 
    instead.  
    <P> 
    
    Data flow diagrams giving an overview of SMOKE merge processing, 
    for EDSS are available in
    <A HREF = "figs/MERGE.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.gif">GIF</A>, in
    <A HREF = "figs/MERGE.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.jpg">JPEG</A>.  Diagrams giving an 
    overview of the main line of EDSS SMOKE processing  and how merge
    processing fits into that whole are available in
    <A HREF = "figs/OVERVIEW.EDSS.ps">Postscript</A>, in
    <A HREF = "figs/OVERVIEW.EDSS.gif">GIF</A>, in
    <A HREF = "figs/OVERVIEW.EDSS.xbm">X bitmap</A>, and in
    <A HREF = "figs/OVERVIEW.EDSS.jpg">JPEG</A>.
    Note that additional
    options for analysis and quality assurance processing are detailed
    in the diagrams on merge processing.


<H3><A NAME = "uaml"> 
Lower-level Merge Processing for UAM and ROM style models </A></H3>

    Program <A HREF = "#CSGMERGE">CSGMERGE</A> prompts the
    user for, and reads in together the gridding matrices 
    <A HREF = "AREA.html#AGMAT">AGMAT</A> and 
    <A HREF = "POINT.html#PGMAT">PGMAT</A>, the speciation matrices
    <A HREF = "AREA.html#ASMAT">ASMAT</A> and 
    <A HREF = "POINT.html#PSMAT">PSMAT</A>, and optionally the control
    matrices <A HREF = "AREA.html#ACMAT">ACMAT</A> and 
    <A HREF = "POINT.html#PCMAT">PCMAT</A>, and multiplies them together to 
    form the composite point and area source transform matrices.  
    In order not to use a control matrix in the composite transform 
    matrix, the user should respond &quot;NONE&quot; to the prompt 
    for it.
    <P> 

    For each time step, CSGMERGE then reads the source level emissions
    from <A HREF = "AREA.html#ATMP">ATMP</A> and 
    <A HREF = "POINT.html#PTMP">PTMP</A>, multiplies them together by the
    composite transform matrices, merges the results together, and
    writes them out to lower level model ready emissions files 
    <A HREF = "#EMIS2D">EMIS2D or EMISC2D</A>.  Alternatively, the user 
    may use the inventory files <A HREF = "AREA.html#AREA">AREA</A> and 
    <A HREF = "POINT.html#PNTS">PNTS</A> in order to construct lower level
    annual total files for analysis and quality assurance purposes, 
    instead.  
    <P> 

    For UAM processing, the EMIS2D file is then used as an input to
    program <A HREF = "#SMK2EMIS">SMK2EMIS</A> which reads EMIS2D 
    and the relevant <A HREF = "#USERIN"> USERIN file</A> for the UAM
    simulation being performed, and constructs the 
    <A HREF = "#UAMGTS">UAMGTS or UAMGTSC</A> UAM-format emissions 
    file for input into the UAM.  The ROM counterpart to 
    SMK2EMIS has not yet been constructed.
    <P> 

    Data flow diagrams describing SMOKE merge processing for lower
    level emissions for the Urban Airshed Model and similar air quality
    chemistry and transport models are available in
    <A HREF = "figs/MERGE.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.gif">GIF</A>, in
    <A HREF = "figs/MERGE.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.jpg">JPEG</A>;
    diagrams showing how SMOKE lower level merge processing fits into
    the totality of UAM-style merge processing are also available in
    <A HREF = "figs/MERGE.UAM.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.UAM.gif">GIF</A>, in
    <A HREF = "figs/MERGE.UAM.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.UAM.jpg">JPEG</A>.  Diagrams giving an 
    overview of the main line of UAM SMOKE processing  and how merge
    processing fits into that whole are available for UAM air quality 
    modeling in
    <A HREF = "figs/OVERVIEW.UAM.ps">Postscript</A>, in
    <A HREF = "figs/OVERVIEW.UAM.gif">GIF</A>, in
    <A HREF = "figs/OVERVIEW.UAM.xbm">X bitmap</A>, and in
    <A HREF = "figs/OVERVIEW.UAM.jpg">JPEG</A>.
    Note that additional
    options for analysis and quality assurance processing are detailed
    in the diagrams on merge processing.
    <P> 


<H3><A NAME = "uamu">
Upper-level Merge Processing for UAM and ROM style models </A></H3>

    Program <A HREF = "#CSELEV">CSELEV</A> prompts the
    user for, and reads in together the speciation matrix
    <A HREF = "POINT.html#PSMAT">PSMAT</A>, and optionally the control
    matrix  <A HREF = "POINT.html#PCMAT">PCMAT</A>, and multiplies them 
    together to form the composite point source transform matrix.  
    In order not to use a control matrix in the composite transform 
    matrix, the user should respond &quot;NONE&quot; to the prompt 
    for it.
    <P> 

    For each time step, CSELEV then reads the source level emissions
    <A HREF = "POINT.html#PTMP">PTMP</A>, multiplies it together by the
    composite transform matrix, and writes the result out to 
    upper level model ready emissions files 
    <A HREF = "#ETS">ETS or ETSC</A>.  For UAM, The ETS file is 
    then used as an input to program <A HREF = "#SMK2PTS">SMK2PTS</A> 
    which reads ETS and the relevant <A HREF = "#USERIN"> USERIN file</A> 
    for the UAM simulation being performed, and constructs the 
    <A HREF = "#UAMETS">UAMETS or UAMETSC</A> UAM-format emissions 
    file for input into the UAM's PTSRCE plume rise preprocessor.
    The ROM counterpart to SMK2PTS has not yet been constructed.
    <P> 

    Data flow diagrams describing SMOKE merge processing for upper
    level emissions for the Urban Airshed Model and similar air quality
    chemistry and transport models are available in
    <A HREF = "figs/CSELEV.ps">Postscript</A>, in
    <A HREF = "figs/CSELEV.gif">GIF</A>, in
    <A HREF = "figs/CSELEV.xbm">X bitmap</A>, and in
    <A HREF = "figs/CSELEV.jpg">JPEG</A>;
    diagrams showing how SMOKE upper level merge processing fits into
    the totality of UAM-style merge processing are also available in
    <A HREF = "figs/MERGE.UAM.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.UAM.gif">GIF</A>, in
    <A HREF = "figs/MERGE.UAM.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.UAM.jpg">JPEG</A>.  Diagrams giving an 
    overview of the main line of UAM SMOKE processing  and how merge
    processing fits into that whole are available for UAM air quality 
    modeling in
    <A HREF = "figs/OVERVIEW.UAM.ps">Postscript</A>, in
    <A HREF = "figs/OVERVIEW.UAM.gif">GIF</A>, in
    <A HREF = "figs/OVERVIEW.UAM.xbm">X bitmap</A>, and in
    <A HREF = "figs/OVERVIEW.UAM.jpg">JPEG</A>.
    Note that additional
    options for analysis and quality assurance processing are detailed
    in the diagrams on merge processing.
    <P> 

<HR>

<H2> <A NAME = "programs"> Merge Programs </A> </H2>

<UL>
    <LI>  <STRONG><A HREF = "#CSELEV"> CSELEV: </A></STRONG>
          construct speciated optionally-controlled temporally
          allocated elevated point source
          emissions file <A HREF = "#ETS">ETS</A>

    <LI>  <STRONG><A HREF = "#CSGMERGE"> CSGMERGE: </A></STRONG>
          construct gridded speciated optionally-controlled temporally 
          allocated (or optionally annual) 
          lower-level model emissions file <A HREF = "#EMIS2D"> EMIS2D</A>

    <LI>  <STRONG><A HREF = "#CSGLDAYMERGE"> CSGLDAYMERGE: </A></STRONG>

    <LI>  <STRONG><A HREF = "#CSGLMERGE"> CSGLMERGE: </A></STRONG>
          construct gridded speciated layered
          optionally-controlled temporally allocated (or optionally
          annual) model emissions file <A HREF = "#EMIS3D"> EMIS3D
          or EMISC3D</A>

    <LI>  <STRONG><A HREF = "#SMK2EMIS">SMK2EMIS: </A></STRONG>
          construct UAM-ready lower-level
          emissions file <A HREF = "#UAMGTS"> USERIN</A>

    <LI>  <STRONG><A HREF = "#SMK2PTS">SMK2PTS: </A></STRONG>
          construct UAM-format upper-level emissions file 
          <A HREF = "#UAMETS">UAMETS</A> for input to UAM plume rise 
          processor PTSRCE.

    <LI>  <STRONG><A HREF = "#SMK2SAQM">SMK2SAQM: </A></STRONG>

</UL>

<HR>

<H2> <a name="CSELEV"> CSELEV </a></H2>

<table >
<tr>
<td><A HREF = "#CSELEV_DESC"> Description</A>
<td><A HREF = "#CSELEV_PRORD"> Processing Order</A>
<td><A HREF = "#CSELEV_INFIL"> Input Files</A>
<td><A HREF = "#CSELEV_INPAR"> Input Params</A>
<td><A HREF = "#CSELEV_INENV"> Input Envt Vars</A>
<tr>
<td><A HREF = "#CSELEV_OUTFIL"> Output Files</A>
<td><A HREF = "#CSELEV_INCL"> Include File Params</A>
<td><A HREF = "#CSELEV_UPCOM"> Upcoming Features</A>
<td><A HREF = "#CSELEV_BUGS"> Known Bugs</A>
<td><A HREF = "#CSELEV_USAGE"> Usage</A>
</table>

<H3><A NAME = "CSELEV_DESC"> Description </A></H3>
    Applies speciation and optionally control matrices to
    time-stepped or time independent elevated point source 
    emissions <A HREF = "POINT.html#ETMP">ETMP</A> to construct 
    model-speciated optionally-controlled elevated point 
    source emissions <A HREF = "#ETS">ETS or ETSC</A>.

<H3><A NAME = "CSELEV_PRORD"> Processing Order </A></H3>
    The following <b>data flow diagram</b> provides a conceptual overview
    of using CSELEV. <p>

    <IMG SRC="figs/CSELEV.gif" ALT="Cutoff style elevated merging diagram"><p>

    <STRONG>Data flow diagrams</STRONG> for CSELEV and how it fits
    into upper level merge processing for UAM oriented modeling are 
    available in 
    <A HREF = "figs/CSELEV.ps">Postscript</A>, in
    <A HREF = "figs/CSELEV.gif">GIF</A>, in
    <A HREF = "figs/CSELEV.xbm">X bitmap</A>, and in
    <A HREF = "figs/CSELEV.jpg">JPEG</A>;
    diagrams showing how SMOKE upper level merge processing fits into
    the totality of UAM-style merge processing are also available in
    <A HREF = "figs/MERGE.UAM.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.UAM.gif">GIF</A>, in
    <A HREF = "figs/MERGE.UAM.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.UAM.jpg">JPEG</A>.
    <P> 
<H3><A NAME = "CSELEV_INFIL"> Input Files </A></H3>
    <UL> 
        <LI>  Input file 
              <A HREF = "POINT.html#ETMP"> <STRONG>ETMP</STRONG> </A>
        <LI>  Input file <A HREF = "POINT.html#PSMAT"> <STRONG>PSMAT</STRONG> </A>
        <LI>  Optional input file 
              <A HREF = "POINT.html#PCMAT"> <STRONG>PCMAT</STRONG> </A>
    </UL>

<H3><A NAME = "CSELEV_INPAR"> Input Parameters </A></H3>
<H3><A NAME = "CSELEV_INENV"> Input Environment Variables </A></H3>
<H3><A NAME = "CSELEV_OUTFIL"> Output Files </A></H3>
    <UL>
        <LI>  Output file 
              <A HREF = "#ETS"> <STRONG>ETS</STRONG> </A>
    </UL>
<H3><A NAME = "CSELEV_INCL"> Include file parameters </A></H3>
<H3><A NAME = "CSELEV_UPCOM"> Upcoming Features </A></H3>
<H3><A NAME = "CSELEV_BUGS"> Known Bugs </A></H3>
<H3><A NAME = "CSELEV_USAGE">Usage </A></H3>

<PRE>
#
#  setenvs for logical file names:
#
setenv PSMAT &lt;path-name for speciation matrix file&gt;
setenv PCMAT &lt;path-name for control    matrix file&gt;
setenv ETMP  &lt;path-name for (temporally allocated) point source file&gt;
setenv ETS &lt;path-name for (temporally allocated) output file&gt;
#
#  Now run the program, using a here-document for input:
#
cselev &lt;&lt; EOF
Yes, continue with the program
PSMAT                   !  point source speciation matrix logical name
PCMAT                   !  point source control matrix logical name, or &quot;NONE&quot;
ETMP                    !  point source gridding matrix logical name
ETS                     !  output file logical name
EOF
#
#  done
#
</PRE>


<H2> <a name="CSGLDAYMERGE"> CSGLDAYMERGE </a></H2>

<table >
<tr>
<td><A HREF = "#CSGLDAYMERGE_DESC"> Description</A>
<td><A HREF = "#CSGLDAYMERGE_PRORD"> Processing Order</A>
<td><A HREF = "#CSGLDAYMERGE_INFIL"> Input Files</A>
<td><A HREF = "#CSGLDAYMERGE_INPAR"> Input Params</A>
<td><A HREF = "#CSGLDAYMERGE_INENV"> Input Envt Vars</A>
<tr>
<td><A HREF = "#CSGLDAYMERGE_OUTFIL"> Output Files</A>
<td><A HREF = "#CSGLDAYMERGE_INCL"> Include File Params</A>
<td><A HREF = "#CSGLDAYMERGE_UPCOM"> Upcoming Features</A>
<td><A HREF = "#CSGLDAYMERGE_BUGS"> Known Bugs</A>
<td><A HREF = "#CSGLDAYMERGE_USAGE"> Usage</A>
</table>

<H3><A NAME = "CSGLDAYMERGE_DESC"> Description </A></H3>
<H3><A NAME = "CSGLDAYMERGE_PRORD"> Processing Order </A></H3>
<H3><A NAME = "CSGLDAYMERGE_INFIL"> Input Files </A></H3>
<H3><A NAME = "CSGLDAYMERGE_INPAR"> Input Parameters </A></H3>
<H3><A NAME = "CSGLDAYMERGE_INENV"> Input Environment Variables </A></H3>
<H3><A NAME = "CSGLDAYMERGE_OUTFIL"> Output Files </A></H3>
<H3><A NAME = "CSGLDAYMERGE_INCL"> Include file parameters </A></H3>
<H3><A NAME = "CSGLDAYMERGE_UPCOM"> Upcoming Features </A></H3>
<H3><A NAME = "CSGLDAYMERGE_BUGS"> Known Bugs </A></H3>
<H3><A NAME = "CSGLDAYMERGE_USAGE">Usage </A></H3>



<H2> <a name="CSGLMERGE"> CSGLMERGE </a></H2>

<table >
<tr>
<td><A HREF = "#CSGLMERGE_DESC"> Description</A>
<td><A HREF = "#CSGLMERGE_PRORD"> Processing Order</A>
<td><A HREF = "#CSGLMERGE_INFIL"> Input Files</A>
<td><A HREF = "#CSGLMERGE_INPAR"> Input Params</A>
<td><A HREF = "#CSGLMERGE_INENV"> Input Envt Vars</A>
<tr>
<td><A HREF = "#CSGLMERGE_OUTFIL"> Output Files</A>
<td><A HREF = "#CSGLMERGE_INCL"> Include File Params</A>
<td><A HREF = "#CSGLMERGE_UPCOM"> Upcoming Features</A>
<td><A HREF = "#CSGLMERGE_BUGS"> Known Bugs</A>
<td><A HREF = "#CSGLMERGE_USAGE"> Usage</A>
</table>

<H3><A NAME = "CSGLMERGE_DESC"> Description </A></H3>
    Applies plume rise fractions, gridding, speciation, and optionally 
    control and/or projection matrices to time-stepped or time independent 
    combinations of area, point, mobile, and biogenic source emissions 
    to construct layered model-ready emissions.  Appropriate for use with
    EDSS/Models-3 models which require 3-D input emissions files.
    <P> 

<H3><A NAME = "CSGLMERGE_PRORD"> Processing Order </A></H3>
    The following <b>data flow diagram</b> provides a conceptual overview
    of using CSGLMERGE. <p>

    <IMG SRC="figs/MERGE.gif" ALT="Layered merged diagram"><p>

    <STRONG>Data flow diagrams</STRONG> for CSGLMERGE and how it fits
    into layered merge processing for EDSS/Models-3 oriented modeling are 
    available in 
    <A HREF = "figs/MERGE.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.gif">GIF</A>, in
    <A HREF = "figs/MERGE.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.jpg">JPEG</A>
    <P> 
<H3><A NAME = "CSGLMERGE_INFIL"> Input Files </A></H3>
    <UL> 
        <LI>  Optional input file choice
              <A HREF = "AREA.html#ATMP"> <STRONG>ATMP</STRONG> </A> or
              <A HREF = "AREA.html#AREA"> <STRONG>AREA</STRONG> </A>
        <LI>  If ATMP or AREA, input file 
              <A HREF = "AREA.html#AGMAT"> <STRONG>AGMAT</STRONG> </A>
        <LI>  If ATMP or AREA, input file 
              <A HREF = "AREA.html#ASMAT"> <STRONG>ASMAT</STRONG> </A>
        <LI>  If ATMP or AREA, optional input file 
              <A HREF = "AREA.html#ACMAT"> <STRONG>ACMAT</STRONG> </A>
        <LI>  If ATMP or AREA, optional input file 
              <A HREF = "AREA.html#ACMAT"> <STRONG>ACMAT</STRONG> </A>
        <LI>  Optional input file
              <A HREF = "BIOGENICS.html#BTMP"> <STRONG>BTMP</STRONG> </A> or
        <LI>  Optional input file
              <A HREF = "MOBILE.html#MTMP"> <STRONG>MTMP</STRONG> </A> or
        <LI>  If MTMP, input file 
              <A HREF = "MOBILE.html#MGMAT"> <STRONG>MGMAT</STRONG> </A>
        <LI>  If MTMP, input file 
              <A HREF = "MOBILE.html#MSMAT"> <STRONG>MSMAT</STRONG> </A>
        <LI>  If MTMP, optional input file 
              <A HREF = "MOBILE.html#MCMAT"> <STRONG>MCMAT</STRONG> </A>
        <LI>  If MTMP, optional input file 
              <A HREF = "MOBILE.html#MCMAT"> <STRONG>MCMAT</STRONG> </A>
        <LI>  Optional input file choice
              <A HREF = "POINT.html#PTMP"> <STRONG>PTMP</STRONG> </A> or
              <A HREF = "POINT.html#PNTS"> <STRONG>PNTS</STRONG> </A>
        <LI>  If PTMP or PNTS, input file 
              <A HREF = "POINT.html#PGMAT"> <STRONG>PGMAT</STRONG> </A>
        <LI>  If PTMP or PNTS, input file 
              <A HREF = "POINT.html#PSMAT"> <STRONG>PSMAT</STRONG> </A>
        <LI>  If PTMP or PNTS, input file 
              <A HREF = "POINT.html#PLAY"> <STRONG>PLAY</STRONG> </A>
        <LI>  PTMP or PNTS, optional input file 
              <A HREF = "POINT.html#PCMAT"> <STRONG>PCMAT</STRONG> </A>
        <LI>  PTMP or PNTS, optional input file 
              <A HREF = "POINT.html#PCMAT"> <STRONG>PCMAT</STRONG> </A>
    </UL>
<H3><A NAME = "CSGLMERGE_INPAR"> Input Parameters </A></H3>
<H3><A NAME = "CSGLMERGE_INENV"> Input Environment Variables </A></H3>
<H3><A NAME = "CSGLMERGE_OUTFIL"> Output Files </A></H3>
    <UL>
        <LI>  Optional output file 
              <A HREF = "#EMIS3D"> <STRONG>EMIS3D</STRONG> or
              <STRONG>EMISC3D</STRONG> </A> (or annual-totals  
              <STRONG>LGS</STRONG> or <STRONG>LGSC</STRONG> when inputs 
              are AREA and PNTS)
    </UL>

<H3><A NAME = "CSGLMERGE_INCL"> Include file parameters </A></H3>
<H3><A NAME = "CSGLMERGE_UPCOM"> Upcoming Features </A></H3>
<H3><A NAME = "CSGLMERGE_BUGS"> Known Bugs </A></H3>
<H3><A NAME = "CSGLMERGE_USAGE">Usage </A></H3>

<PRE>
#
#  setenvs for logical file names:
#
setenv AGMAT &lt;path-name for area source gridding   matrix file&gt;
setenv ASMAT &lt;path-name for area source speciation matrix file&gt;
setenv ACMAT &lt;path-name for area source control    matrix file&gt;
setenv APMAT &lt;path-name for area source projection matrix file&gt;
setenv ATMP  &lt;path-name for (temporally allocated) area source file&gt;
setenv BTMP  &lt;path-name for (temporally allocated) biogenic source file&gt;
setenv MGMAT &lt;path-name for mobile source gridding   matrix file&gt;
setenv MSMAT &lt;path-name for mobile source speciation matrix file&gt;
setenv MCMAT &lt;path-name for mobile source control    matrix file&gt;
setenv MPMAT &lt;path-name for mobile source projection matrix file&gt;
setenv MTMP  &lt;path-name for (temporally allocated) mobile source file&gt;
setenv PGMAT &lt;path-name for point source gridding   matrix file&gt;
setenv PSMAT &lt;path-name for point source speciation matrix file&gt;
setenv PCMAT &lt;path-name for point source control    matrix file&gt;
setenv PPMAT &lt;path-name for point source projection matrix file&gt;
setenv PLAY  &lt;path-name for point source plume rise layer fractions file&gt;
setenv PTMP  &lt;path-name for (temporally allocated) point source file&gt;
setenv EMISC3D &lt;path-name for (temporally allocated) output file&gt;
#
#  Now run the program, using a here-document for input:
#
csgmerge &lt;&lt; EOF
Yes, continue with the program
ATMP                    !  area  source emissions file, or &quot;NONE&quot;
AGMAT                   !  area  source gridding matrix logical name
ASMAT                   !  area  source speciation matrix logical name
ACMAT                   !  area  source control matrix logical name, or &quot;NONE&quot;
APMAT                   !  area  source projection matrix logical name, or &quot;NONE&quot;
BTMP                    !  biogenic source emissions file, or &quot;NONE&quot;
MTMP                    !  mobile  source emissions file, or &quot;NONE&quot;
MGMAT                   !  mobile  source gridding matrix logical name
MSMAT                   !  mobile  source speciation matrix logical name
MCMAT                   !  mobile  source control matrix logical name, or &quot;NONE&quot;
MPMAT                   !  mobile  source projection matrix logical name, or &quot;NONE&quot;
PTMP                    !  point source emissions file, or &quot;NONE&quot;
PGMAT                   !  point source gridding matrix logical name
PSMAT                   !  point source speciation matrix logical name
PLAY                    !  point source plume rise layer fractions file
PCMAT                   !  point source control matrix logical name, or &quot;NONE&quot;
PPMAT                   !  point source projection matrix logical name, or &quot;NONE&quot;
EMISC3D                   !  output file logical name, or &quot;NONE&quot;
EOF
#
#            done
#
</PRE>


<H2> <a name="CSGMERGE"> CSGMERGE </a></H2>

<table >
<tr>
<td><A HREF = "#CSGMERGE_DESC"> Description</A>
<td><A HREF = "#CSGMERGE_PRORD"> Processing Order</A>
<td><A HREF = "#CSGMERGE_INFIL"> Input Files</A>
<td><A HREF = "#CSGMERGE_INPAR"> Input Params</A>
<td><A HREF = "#CSGMERGE_INENV"> Input Envt Vars</A>
<tr>
<td><A HREF = "#CSGMERGE_OUTFIL"> Output Files</A>
<td><A HREF = "#CSGMERGE_INCL"> Include File Params</A>
<td><A HREF = "#CSGMERGE_UPCOM"> Upcoming Features</A>
<td><A HREF = "#CSGMERGE_BUGS"> Known Bugs</A>
<td><A HREF = "#CSGMERGE_USAGE"> Usage</A>
</table>

<H3><A NAME = "CSGMERGE_DESC"> Description </A></H3>
    Applies gridding, speciation, and optionally control matrices 
    to time-stepped or time independent area, biogenic, mobile, and
    lower-level point source emissions to construct 1-layer 
    model-ready emissions.  Appropriate when separate plume rise
    calculation is being performed, on file <A HREF = "POINT.html#ETMP">ETMP</A>, 
    by <A HREF = "#CSELEV">program CSELEV</A>, as for UAM or ROM 
    processing.
    <P> 
<H3><A NAME = "CSGMERGE_PRORD"> Processing Order </A></H3>
    The following <b>data flow diagram</b> provides a conceptual overview
    of using CSGMERGE. <p>

    <IMG SRC="figs/MERGE.gif" ALT="Single layer merge diagram"><p>

    <STRONG>Data flow diagrams</STRONG> for CSGMERGE and how it fits
    into lower level merge processing for UAM oriented modeling are 
    available in 
    <A HREF = "figs/MERGE.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.gif">GIF</A>, in
    <A HREF = "figs/MERGE.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.jpg">JPEG</A>;
    diagrams showing how SMOKE lower level merge processing fits into
    the totality of UAM-style merge processing are also available in
    <A HREF = "figs/MERGE.UAM.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.UAM.gif">GIF</A>, in
    <A HREF = "figs/MERGE.UAM.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.UAM.jpg">JPEG</A>.
    <P> 
<H3><A NAME = "CSGMERGE_INFIL"> Input Files </A></H3>
    <UL> 
        <LI>  Optional input file choice
              <A HREF = "AREA.html#ATMP"> <STRONG>ATMP</STRONG> </A> or
              <A HREF = "AREA.html#AREA"> <STRONG>AREA</STRONG> </A>
        <LI>  If ATMP or AREA, input file 
              <A HREF = "AREA.html#AGMAT"> <STRONG>AGMAT</STRONG> </A>
        <LI>  If ATMP or AREA, input file 
              <A HREF = "AREA.html#ASMAT"> <STRONG>ASMAT</STRONG> </A>
        <LI>  If ATMP or AREA, optional input file 
              <A HREF = "AREA.html#ACMAT"> <STRONG>ACMAT</STRONG> </A>
        <LI>  If ATMP or AREA, optional input file 
              <A HREF = "AREA.html#ACMAT"> <STRONG>ACMAT</STRONG> </A>
        <LI>  Optional input file
              <A HREF = "BIOGENICS.html#BTMP"> <STRONG>BTMP</STRONG> </A> or
        <LI>  Optional input file
              <A HREF = "MOBILE.html#MTMP"> <STRONG>MTMP</STRONG> </A> or
        <LI>  If MTMP, input file 
              <A HREF = "MOBILE.html#MGMAT"> <STRONG>MGMAT</STRONG> </A>
        <LI>  If MTMP, input file 
              <A HREF = "MOBILE.html#MSMAT"> <STRONG>MSMAT</STRONG> </A>
        <LI>  If MTMP, optional input file 
              <A HREF = "MOBILE.html#MCMAT"> <STRONG>MCMAT</STRONG> </A>
        <LI>  If MTMP, optional input file 
              <A HREF = "MOBILE.html#MCMAT"> <STRONG>MCMAT</STRONG> </A>
        <LI>  Optional input file choice
              <A HREF = "POINT.html#PTMP"> <STRONG>PTMP</STRONG> </A> or
              <A HREF = "POINT.html#PNTS"> <STRONG>PNTS</STRONG> </A>
        <LI>  If PTMP or PNTS, input file 
              <A HREF = "POINT.html#PGMAT"> <STRONG>PGMAT</STRONG> </A>
        <LI>  If PTMP or PNTS, input file 
              <A HREF = "POINT.html#PSMAT"> <STRONG>PSMAT</STRONG> </A>
        <LI>  PTMP or PNTS, optional input file 
              <A HREF = "POINT.html#PCMAT"> <STRONG>PCMAT</STRONG> </A>
        <LI>  PTMP or PNTS, optional input file 
              <A HREF = "POINT.html#PCMAT"> <STRONG>PCMAT</STRONG> </A>
    </UL>

<H3><A NAME = "CSGMERGE_INPAR"> Input Parameters </A></H3>
<H3><A NAME = "CSGMERGE_INENV"> Input Environment Variables </A></H3>
<H3><A NAME = "CSGMERGE_OUTFIL"> Output Files </A></H3>
    <UL>
        <LI>  Optional output file 
              <A HREF = "#EMIS2D"> <STRONG>EMIS2D</STRONG> or
              <STRONG>EMISC2D</STRONG> </A> (or annual-totals 
              <STRONG>GS</STRONG> or <STRONG>GSC</STRONG> when inputs
              are AREA and PNTS)
    </UL>
<H3><A NAME = "CSGMERGE_INCL"> Include file parameters </A></H3>
<H3><A NAME = "CSGMERGE_UPCOM"> Upcoming Features </A></H3>
<H3><A NAME = "CSGMERGE_BUGS"> Known Bugs </A></H3>
<H3><A NAME = "CSGMERGE_USAGE">Usage </A></H3>

<PRE>
#
#  setenvs for logical file names:
#
setenv AGMAT &lt;path-name for area source gridding   matrix file&gt;
setenv ASMAT &lt;path-name for area source speciation matrix file&gt;
setenv ACMAT &lt;path-name for area source control    matrix file&gt;
setenv APMAT &lt;path-name for area source projection matrix file&gt;
setenv ATMP  &lt;path-name for (temporally allocated) area source file&gt;
setenv BTMP  &lt;path-name for (temporally allocated) biogenic source file&gt;
setenv MGMAT &lt;path-name for mobile source gridding   matrix file&gt;
setenv MSMAT &lt;path-name for mobile source speciation matrix file&gt;
setenv MCMAT &lt;path-name for mobile source control    matrix file&gt;
setenv MPMAT &lt;path-name for mobile source projection matrix file&gt;
setenv MTMP  &lt;path-name for (temporally allocated) mobile source file&gt;
setenv PGMAT &lt;path-name for point source gridding   matrix file&gt;
setenv PSMAT &lt;path-name for point source speciation matrix file&gt;
setenv PCMAT &lt;path-name for point source control    matrix file&gt;
setenv PPMAT &lt;path-name for point source projection matrix file&gt;
setenv PTMP  &lt;path-name for (temporally allocated) point source file&gt;
setenv EMISC2D  &lt;path-name for (temporally allocated) output file&gt;
#
#  Now run the program, using a here-document for input:
#
csgmerge &lt;&lt; EOF
Yes, continue with the program
ATMP                    !  area  source emissions file, or &quot;NONE&quot;
AGMAT                   !  area  source gridding matrix logical name
ASMAT                   !  area  source speciation matrix logical name
ACMAT                   !  area  source control matrix logical name, or &quot;NONE&quot;
APMAT                   !  area  source projection matrix logical name, or &quot;NONE&quot;
BTMP                    !  biogenic source emissions file, or &quot;NONE&quot;
MTMP                    !  mobile  source emissions file, or &quot;NONE&quot;
MGMAT                   !  mobile  source gridding matrix logical name
MSMAT                   !  mobile  source speciation matrix logical name
MCMAT                   !  mobile  source control matrix logical name, or &quot;NONE&quot;
MPMAT                   !  mobile  source projection matrix logical name, or &quot;NONE&quot;
PTMP                    !  point source emissions file, or &quot;NONE&quot;
PGMAT                   !  point source gridding matrix logical name
PSMAT                   !  point source speciation matrix logical name
PCMAT                   !  point source control matrix logical name, or &quot;NONE&quot;
PPMAT                   !  point source projection matrix logical name, or &quot;NONE&quot;
EMISC2D                 !  output file logical name, or &quot;NONE&quot;
EOF
#
#            done
#
</PRE>


<H2> <a name="SMK2EMIS"> SMK2EMIS </a></H2>
<table >
<tr>
<td><A HREF = "#SMK2EMIS_DESC"> Description</A>
<td><A HREF = "#SMK2EMIS_PRORD"> Processing Order</A>
<td><A HREF = "#SMK2EMIS_INFIL"> Input Files</A>
<td><A HREF = "#SMK2EMIS_INPAR"> Input Params</A>
<td><A HREF = "#SMK2EMIS_INENV"> Input Envt Vars</A>
<tr>
<td><A HREF = "#SMK2EMIS_OUTFIL"> Output Files</A>
<td><A HREF = "#SMK2EMIS_INCL"> Include File Params</A>
<td><A HREF = "#SMK2EMIS_UPCOM"> Upcoming Features</A>
<td><A HREF = "#SMK2EMIS_BUGS"> Known Bugs</A>
<td><A HREF = "#SMK2EMIS_USAGE"> Usage</A>
</table>

<H3><A NAME = "SMK2EMIS_DESC"> Description </A></H3>
    SMK2EMIS reads the SMOKE file of speciated, gridded optionally-controlled 
    lower-level emissions <A HREF = "#EMIS2D">EMIS2D or EMISC2D</A>.  This 
    input is used with a relevant <A HREF = "#USERIN">UAM USERIN file</A> 
    to generate the UAM-format Fortran binary EMISSIONS file for input 
    into the UAM.
    <P> 
    
    The program ensures that the temporal, spatial, and variable 
    specifications on the EMIS2D and USERIN files match before 
    processing the elevated point sources.  The program will 
    abort if temporal or spatial details do not match, but will 
    allow the user to continue if all output species do not
    appear in the input file.
    <P> 
    
    The program will also prompt the user for a title for the 
    header of the output file.  In the usual case that the EMISSIONS 
    file is being created, the default value of "EMISSIONS" is used.
    The program could potentially be used for other gridded NetCDF I/O API 
    to UAM conversions.
    <P> 

<H3><A NAME = "SMK2EMIS_PRORD"> Processing Order </A></H3>

    <STRONG>Data flow diagrams</STRONG> for SMK2EMIS and how it fits
    into lower level merge processing for UAM oriented modeling are 
    available in 
    <A HREF = "figs/MERGE.ps">Postscript</A>, in
    <A HREF = "figs/MERGE.gif">GIF</A>, in
    <A HREF = "figs/MERGE.xbm">X bitmap</A>, and in
    <A HREF = "figs/MERGE.jpg">JPEG</A>
    <P> 
<H3><A NAME = "SMK2EMIS_INFIL"> Input Files </A></H3>
<H3> Data Sets Produced and Consumed </H3><p>

    <UL> 
        <LI>  Input file <A HREF = "#EMIS2D">EMIS2D or EMISC2D</A>
        <LI>  Input file <A HREF = "#USERIN"> USERIN </A>
    </UL>
<H3><A NAME = "SMK2EMIS_INPAR"> Input Parameters </A></H3>
<H3><A NAME = "SMK2EMIS_INENV"> Input Environment Variables </A></H3>
<H3><A NAME = "SMK2EMIS_OUTFIL"> Output Files </A></H3>
    <UL>
        <LI>  Output file <A HREF = "#UAMGTS">UAMGTS or UAMGTSC</A>
    </UL>
<H3><A NAME = "SMK2EMIS_INCL"> Include file parameters </A></H3>
<H3><A NAME = "SMK2EMIS_UPCOM"> Upcoming Features </A></H3>
<H3><A NAME = "SMK2EMIS_BUGS"> Known Bugs </A></H3>
<H3><A NAME = "SMK2EMIS_USAGE">Usage </A></H3>

<PRE>
#
#  setenvs for logical input file names:
#
 
setenv EMISC2D &lt;path-name for SMOKE lower level emissions file&gt;
setenv USERIN  &lt;path-name for relevant UAM USERIN file&gt;
 
#
#  setenvs for logical output file names:
#
 
setenv UAMGTSC &lt;path-name for UAM lower level point sources file EMISSIONS&gt;
 
#
#  Now run the program, using a here-document for input:
#
 
smk2emis  &lt;&lt; EOF
Y
EMISC2D
USERIN
EMISSIONS
UAMGTSC
EOF
#
# done
#
</PRE>



<H2> <a name="SMK2PTS"> SMK2PTS </a></H2>

<table >
<tr>
<td><A HREF = "#SMK2PTS_DESC"> Description</A>
<td><A HREF = "#SMK2PTS_PRORD"> Processing Order</A>
<td><A HREF = "#SMK2PTS_INFIL"> Input Files</A>
<td><A HREF = "#SMK2PTS_INPAR"> Input Params</A>
<td><A HREF = "#SMK2PTS_INENV"> Input Envt Vars</A>
<tr>
<td><A HREF = "#SMK2PTS_OUTFIL"> Output Files</A>
<td><A HREF = "#SMK2PTS_INCL"> Include File Params</A>
<td><A HREF = "#SMK2PTS_UPCOM"> Upcoming Features</A>
<td><A HREF = "#SMK2PTS_BUGS"> Known Bugs</A>
<td><A HREF = "#SMK2PTS_USAGE"> Usage</A>
</table>

<H3><A NAME = "SMK2PTS_DESC"> Description </A></H3>
    SMK2PTS reads the I/O API elevated speciated optionally controlled 
    point source file <A HREF = "#ETS">ETS or ETSC</A>.  It
    is used with a relevant <A HREF = "#USERIN">UAM USERIN file</A>
    and the <A HREF = "POINT.html#PNTS">point source inventory file PNTS</A> 
    to generate the UAM-format Fortran binary input file UAMETS to the 
    UAM PTSRCE pre-processor.  
    <P> 
    
    The program ensures that the temporal and variable specifications 
    on the ETS and USERIN files match before processing the elevated 
    point sources.  The program will abort if temporal details do not
    match, but will allow the user to continue if all output species 
    do not appear in the input file.
    <P> 
    
    The program will also prompt the user for the vertical method 
    type to be specified in the output file.  The vertical method 
    &quot;PLUMERISE&quot; enables the user to drive UAM 4, and the 
    vertical method &quot;STACKHGT&quot; enables the user to drive UAM-V.  

<H3><A NAME = "SMK2PTS_PRORD"> Processing Order </A></H3>

    <STRONG>Data flow diagrams</STRONG> for SMK2PTS and how it fits
    into upper level merge processing for UAM oriented modeling are 
    available in 
    <A HREF = "figs/CSELEV.ps">Postscript</A>, in
    <A HREF = "figs/CSELEV.gif">GIF</A>, in
    <A HREF = "figs/CSELEV.xbm">X bitmap</A>, and in
    <A HREF = "figs/CSELEV.jpg">JPEG</A>
    <P> 
<H3><A NAME = "SMK2PTS_INFIL"> Input Files </A></H3>
Input file PNTS
Input file ETS or ETSC
Input file USERIN
    <UL> 
        <LI>  Input  file <A HREF = "#ETS">    ETS or ETSC</A>
        <LI>  Input  file <A HREF = "#USERIN"> USERIN </A>
    </UL>
<H3><A NAME = "SMK2PTS_INPAR"> Input Parameters </A></H3>
<H3><A NAME = "SMK2PTS_INENV"> Input Environment Variables </A></H3>
<H3><A NAME = "SMK2PTS_OUTFIL"> Output Files </A></H3>
Output file UAMETS
    <UL>
        <LI>  Output file <A HREF = "#UAMETS"> UAMETS or UAMETSC</A>
    </UL>
<H3><A NAME = "SMK2PTS_INCL"> Include file parameters </A></H3>
<H3><A NAME = "SMK2PTS_UPCOM"> Upcoming Features </A></H3>
<H3><A NAME = "SMK2PTS_BUGS"> Known Bugs </A></H3>
<H3><A NAME = "SMK2PTS_USAGE">Usage </A></H3>

<H3>  Usage  </H3><p>

<PRE>
#
#  setenvs for logical input file names:
#

setenv PNTS  &lt;path-name for SMOKE point source annual inventory file&gt;
setenv ETSC  &lt;path-name for SMOKE elevated, speciated, controled emissions file&gt;
setenv USERIN  &lt;path-name for relevant UAM USERIN file&gt;

#
#  setenvs for logical output file names:
#

setenv UAMETS &lt;path-name for UAM elevated point sources file PTSOURCE&gt;

#
#  Now run the program, using a here-document for input:
#

smk2pts  &lt;&lt; EOF
Yes, continue with the program
PNTS                    !  point source annual inventory file
ETSC _or_ ETS
USERIN
24
PLUMERISE
EOF
#
# done
#
</PRE>

<H2> <a name="SMK2SAQM"> SMK2SAQM </a></H2>

<table >
<tr>
<td><A HREF = "#SMK2SAQM_DESC"> Description</A>
<td><A HREF = "#SMK2SAQM_PRORD"> Processing Order</A>
<td><A HREF = "#SMK2SAQM_INFIL"> Input Files</A>
<td><A HREF = "#SMK2SAQM_INPAR"> Input Params</A>
<td><A HREF = "#SMK2SAQM_INENV"> Input Envt Vars</A>
<tr>
<td><A HREF = "#SMK2SAQM_OUTFIL"> Output Files</A>
<td><A HREF = "#SMK2SAQM_INCL"> Include File Params</A>
<td><A HREF = "#SMK2SAQM_UPCOM"> Upcoming Features</A>
<td><A HREF = "#SMK2SAQM_BUGS"> Known Bugs</A>
<td><A HREF = "#SMK2SAQM_USAGE"> Usage</A>
</table>

<H3><A NAME = "SMK2SAQM_DESC"> Description </A></H3>
<H3><A NAME = "SMK2SAQM_PRORD"> Processing Order </A></H3>
<H3><A NAME = "SMK2SAQM_INFIL"> Input Files </A></H3>
<H3><A NAME = "SMK2SAQM_INPAR"> Input Parameters </A></H3>
<H3><A NAME = "SMK2SAQM_INENV"> Input Environment Variables </A></H3>
<H3><A NAME = "SMK2SAQM_OUTFIL"> Output Files </A></H3>
<H3><A NAME = "SMK2SAQM_INCL"> Include file parameters </A></H3>
<H3><A NAME = "SMK2SAQM_UPCOM"> Upcoming Features </A></H3>
<H3><A NAME = "SMK2SAQM_BUGS"> Known Bugs </A></H3>
<H3><A NAME = "SMK2SAQM_USAGE">Usage </A></H3>



<HR>

<H2> <A NAME = "dataset"> Merge Processing Data Set Definitions </A> </H2>

<UL>
    <LI>  <A HREF = "#ETS"> <STRONG>ETS: </STRONG></A>
          time-stepped speciated optionally-controlled upper-level
          point source emissions file
          
    <LI>  <A HREF = "#EMIS2D"> <STRONG>EMIS2D: </STRONG></A>
          Merged area, (biogenic, mobile) point source) 
          optionally-time-stepped gridded speciated optionally-controlled
          lower-level model-emissions file

    <LI>  <A HREF = "#EMIS3D"> <STRONG>EMIS3D: </STRONG></A>
          Merged area, (biogenic, mobile) point source)
          optionally-time-stepped gridded speciated
          optionally-controlled layered model-emissions file

    <LI>  <A HREF = "#UAMETS"> <STRONG>UAMETS: </STRONG></A>
          UAM-format time-stepped speciated  optionally-controlled
          upper-level point source emissions file for input to UAM
          plume rise processor PTSRCE

    <LI>  <A HREF = "#UAMGTS"> <STRONG>UAMGTS: </STRONG></A>
          UAM-format Merged area, (biogenic, mobile) point
          source)gridded speciated lower-level optionally-controlled
          UAM-ready model emissions file

    <LI>  <A HREF = "#USERIN"> <STRONG>USERIN: </STRONG></A>
          UAM run specification file

    <LI>  <A HREF = "POINT.html#PLAY"> <STRONG>PLAY: </STRONG></A>
          Time stepped fractions of point source plumes to be 
          allocated to each model layer in EDSS emissions processing.

</UL>

<HR> <!---->

<H2> <a name="EMIS2D"> EMIS2D and EMISC2D Files </a> </H2>

    EMIS2D and EMISC2D are the emissions prototype's model-ready hourly time 
    stepped gridded lower-level optionally-controlled combined (point, 
    area, mobile, and  optionally biogenic) emissions files.  They are
    (portable, network transparent, machine architecture independent 
    direct access binary) files produced by 
    <A HREF = "#CSGMERGE"> program CSGMERGE</A> and used by the 
    chemistry-transport model and by <A HREF = "SMK2EMIS">UAM
    conversion program SMK2EMIS</A>.
    <P> 
    
    They are time-stepped <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.AA.html"> 
    EDSS/Models-3 I/O API file </A> of type GRDDED3 (gridded), with
    time step 1 hour, and dimensions appropriate for the model grid:
    the number of layers is 1, while  the numbers NCOLS of columns 
    and NROWS of rows are defined in the 
    <A HREF = "INCLUDES.html#grdims"> GRDIMS3.EXT include file.</A>
    
    The variables in the files are the gridded model speciated 
    optionally-controlled hourly time stepped combined emissions, 
    in units of moles per hour.  Names for the variables are the 
    EMNAM names from the <A HREF = "INCLUDES.html#chdims"> 
    CHDIMS3.EXT include file.</A>  For the North Carolina domain 
    UAM Carbon-Bond IV prototype, the list of variable names is the 
    following:
    <UL>
         <LI>  <STRONG>CO </STRONG> carbon monoxide;
         <LI>  <STRONG>NO </STRONG> nitric oxide;
         <LI>  <STRONG>NO2</STRONG> nitrogen dioxide;
         <LI>  <STRONG>OLE</STRONG> olefins;
         <LI>  <STRONG>PAR</STRONG> parafins;
         <LI>  <STRONG>TOL</STRONG> toluene;
         <LI>  <STRONG>XYL</STRONG> xylene;
         <LI>  <STRONG>FORM</STRONG> formaldehyde;
         <LI>  <STRONG>ALD2</STRONG> high molecular weight aldehydes;
         <LI>  <STRONG>ETH </STRONG> ethene;
         <LI>  <STRONG>MEOH</STRONG> methanol;
         <LI>  <STRONG>ETOH</STRONG> ethanol; and
         <LI>  <STRONG>ISOP</STRONG> isoprene
    </UL>    
    <P> 

<HR>

<H2> <a name="EMIS3D"> EMIS3D and EMISC3D Files </a></H2>

<H3> Overview</H3>
    <b>Description:</b>
    <b>Sequence:</b>
    <b>Type:</b>
    <b>Origin:</b>
    <b>Used by:</b>
    <b>Summary:</b>

<H3>File Format(s)</H3>
    <b>Same as:</b>
    <b>Structure:</b>
    <b>Header:</b>
    <b>Variables:</b>
    <p>

    EMIS3D is the emissions prototype's model-ready hourly 
    time stepped gridded layered optionally-controlled combined (point, 
    area, mobile, and  optionally biogenic) emissions files.  They are
    portable, network transparent, machine architecture independent 
    direct access binary files produced by
    <A HREF = "#CSGLMERGE"> program CSGLMERGE</A> and used by the 
    chemistry-transport model.
    <P> 
    
    They are time-stepped <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.AA.html"> 
    EDSS/Models-3 I/O API file </A> of type GRDDED3 (gridded), with
    time step 1 hour, and dimensions appropriate for the model grid:
    the number NLAYS of layers is EMLAYS, defined in 
    <A HREF = "INCLUDES.html#ladims"> include file LADIMS3.EXT</A>, 
    while the numbers NCOLS of columns and NROWS of rows are defined 
    in the <A HREF = "INCLUDES.html#grdims">GRDIMS3.EXT include file.</A>
    
    The variables in the file are the gridded model speciated 
    optionally-controlled hourly time stepped combined emissions,
    in units of moles per hour.  
    Names for the variables are the EMNAM names from 
    <A HREF = "INCLUDES.html#chdims"> CHDIMS3.EXT include file.</A>  
    For the North Carolina domain UAM Carbon-Bond IV prototype, the 
    list of variable names is the following:
    <OL>
         <LI>  <STRONG>CO</STRONG>, carbon monoxide;
         <LI>  <STRONG>NO</STRONG>, nitric oxide;
         <LI>  <STRONG>NO2</STRONG>, nitrogen dioxide;
         <LI>  <STRONG>OLE</STRONG>, olefins;
         <LI>  <STRONG>PAR</STRONG>, parafins;
         <LI>  <STRONG>TOL</STRONG>, toluene;
         <LI>  <STRONG>XYL</STRONG>, xylene;
         <LI>  <STRONG>FORM</STRONG>, formaldehyde;
         <LI>  <STRONG>ALD2</STRONG>, high molecular weight aldehydes;
         <LI>  <STRONG>ETH</STRONG>, ethene;
         <LI>  <STRONG>MEOH</STRONG>, methanol;
         <LI>  <STRONG>ETOH</STRONG>, ethanol; and
         <LI>  <STRONG>ISOP</STRONG>, isoprene
    </OL>    
    <P> 

<HR> 

<H2> <a name="ETS"> ETS and ETSC </a></H2>

<H3> Overview</H3>
    <b>Description:</b>
    <b>Sequence:</b>
    <b>Type:</b>
    <b>Origin:</b>
    <b>Used by:</b>
    <b>Summary:</b>

<H3>File Format(s)</H3>
    <b>Same as:</b>
    <b>Structure:</b>
    <b>Header:</b>
    <b>Variables:</b>

    ETS and ETSC are the emissions prototype's source-level model 
    speciated hourly time stepped upper level point source files.  They
    are portable, network transparent, machine architecture independent 
    direct access binary files produced by program 
    <A HREF = "#CSELEV"> CSELEV </A> and used by programs such
    as <A HREF = "#SMK2PTS">the UAM conversion program SMK2PTS</A>
    which convert it to model-specific for input to UAM or ROM plume
    rise processors.
    <P> 
    
    They are time-stepped <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.AA.html"> 
    EDSS/Models-3 I/O API file </A> of type 
    <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.DATATYPES.html#iddata">IDDATA3 (ID-referenced 
    data)</A>, with time step 1 hour.  The dimensions are as follows:
    <UL>
        <LI>  NLAYS, the numbers of layers, is 1 
        <LI>  NROWS, the row dimension, is <STRONG>NPELV</STRONG>,
              the maximum number of elevated point sources, from
              <A HREF = "INCLUDES.html#ptdims"> INCLUDE file
              PTDIMS3.EXT</A>.  
    </UL>
    Members of the ID array in the timestep records are subscripts 
    into the sources specified in the <A HREF = "POINT.html#PNTS"> PNTS file</A>
    (so that, for example, an ID of &quot;5&quot; means that the
    corresponding entries in the record are for the fifth source in the
    standard source ordering as found in PNTS).  
    <P> 
    
    The variables in the file are the source level model speciated
    time stepped elevated point source emissions, in units of moles
    per hour.  Names for the variables are the EMNAM chemical-mechanism
    model species names from the 
    <A HREF = "INCLUDES.html#chdims"> CHDIMS3.EXT include file.</A>  
    For the North Carolina UAM domain Carbon-Bond IV prototype, the 
    list of variable names is the following:
    <UL>
         <LI>  <STRONG>CO</STRONG>, carbon monoxide;
         <LI>  <STRONG>NO</STRONG>, nitric oxide;
         <LI>  <STRONG>NO2</STRONG>, nitrogen dioxide;
         <LI>  <STRONG>OLE</STRONG>, olefins;
         <LI>  <STRONG>PAR</STRONG>, parafins;
         <LI>  <STRONG>TOL</STRONG>, toluene;
         <LI>  <STRONG>XYL</STRONG>, xylene;
         <LI>  <STRONG>FORM</STRONG>, formaldehyde;
         <LI>  <STRONG>ALD2</STRONG>, high molecular weight aldehydes;
         <LI>  <STRONG>ETH</STRONG>, ethene;
         <LI>  <STRONG>MEOH</STRONG>, methanol;
         <LI>  <STRONG>ETOH</STRONG>, ethanol; and
         <LI>  <STRONG>ISOP</STRONG>, isoprene
    </UL>    
    <P> 




<HR> <!---->

<H2> <a name="UAMETS"> UAMETS and UAMETSC </a></H2>

<H3> Overview</H3>
    <b>Description:</b>
    <b>Sequence:</b>
    <b>Type:</b>
    <b>Origin:</b>
    <b>Used by:</b>
    <b>Summary:</b>

<H3>File Format(s)</H3>
    <b>Same as:</b>
    <b>Structure:</b>
    <b>Header:</b>
    <b>Variables:</b>

    UAMETS and UAMETSC are the emissions prototype's source-level 
    model speciated hourly time stepped upper level point source files.  
    They are nonportable, network and machine architecture dependent 
    Fortran binary files produced by
    <A HREF = "#SMK2PTS">the UAM conversion program SMK2PTS</A>
    which convert <A HREF = "#ETS">files ETS and ETSC</A> to 
    UAM-format UAM-model-specific format for input to UAM plume
    rise processor PTSRCE.
    <P> 

    The variables in the files are the source level model speciated
    time stepped elevated point source emissions, in units of moles
    per hour.  Names for the variables are the EMNAM chemical-mechanism
    model species names from the 
    <A HREF = "INCLUDES.html#chdims"> CHDIMS3.EXT include file.</A>  
    For the North Carolina UAM domain Carbon-Bond IV prototype, the 
    list of variable names is the following:
    <UL>
         <LI>  <STRONG>CO</STRONG>, carbon monoxide;
         <LI>  <STRONG>NO</STRONG>, nitric oxide;
         <LI>  <STRONG>NO2</STRONG>, nitrogen dioxide;
         <LI>  <STRONG>OLE</STRONG>, olefins;
         <LI>  <STRONG>PAR</STRONG>, parafins;
         <LI>  <STRONG>TOL</STRONG>, toluene;
         <LI>  <STRONG>XYL</STRONG>, xylene;
         <LI>  <STRONG>FORM</STRONG>, formaldehyde;
         <LI>  <STRONG>ALD2</STRONG>, high molecular weight aldehydes;
         <LI>  <STRONG>ETH</STRONG>, ethene;
         <LI>  <STRONG>MEOH</STRONG>, methanol;
         <LI>  <STRONG>ETOH</STRONG>, ethanol; and
         <LI>  <STRONG>ISOP</STRONG>, isoprene
    </UL>    
    <P> 

<HR>
   
<H2> <a name="UAMGTS"> UAMGTS and UAMGTSC </a></H2>

<H3> Overview</H3>
    <b>Description:</b>
    <b>Sequence:</b>
    <b>Type:</b>
    <b>Origin:</b>
    <b>Used by:</b>
    <b>Summary:</b>

<H3>File Format(s)</H3>
    <b>Same as:</b>
    <b>Structure:</b>
    <b>Header:</b>
    <b>Variables:</b>

    UAMGTS and UAMGTSC are the emissions prototype's UAM-format,
    UAM-ready hourly time stepped gridded lower-level optionally-controlled 
    combined (point, area, mobile, and  optionally biogenic) emissions
    files.  They are (nonportable, network and machine architecture 
    dependent Fortran binary) files produced by program 
    <A HREF = "#SMK2EMIS"> SMK2EMIS</A> and used by the UAM
    chemistry-transport model.
    <P> 
    
    The variables in the files are the gridded model speciated 
    optionally-controlled hourly time stepped combined emissions, 
    in units of moles per hour.  For the North Carolina domain 
    UAM Carbon-Bond IV prototype, the list of variable names is the 
    following:
    <UL>
         <LI>  <STRONG>CO </STRONG> carbon monoxide;
         <LI>  <STRONG>NO </STRONG> nitric oxide;
         <LI>  <STRONG>NO2</STRONG> nitrogen dioxide;
         <LI>  <STRONG>OLE</STRONG> olefins;
         <LI>  <STRONG>PAR</STRONG> parafins;
         <LI>  <STRONG>TOL</STRONG> toluene;
         <LI>  <STRONG>XYL</STRONG> xylene;
         <LI>  <STRONG>FORM</STRONG> formaldehyde;
         <LI>  <STRONG>ALD2</STRONG> high molecular weight aldehydes;
         <LI>  <STRONG>ETH </STRONG> ethene;
         <LI>  <STRONG>MEOH</STRONG> methanol;
         <LI>  <STRONG>ETOH</STRONG> ethanol; and
         <LI>  <STRONG>ISOP</STRONG> isoprene
    </UL>    
    <P> 


<HR> <!---->

   
<H2> <a name="USERIN"> USERIN </a></H2>

<H3> Overview</H3>
    <b>Description:</b>
    <b>Sequence:</b>
    <b>Type:</b>
    <b>Origin:</b>
    <b>Used by:</b>
    <b>Summary:</b>

<H3>File Format(s)</H3>
    <b>Same as:</b>
    <b>Structure:</b>
    <b>Header:</b>
    <b>Variables:</b>


    USERIN is the UAM file containing the information used to control
    runs of the Urban Airshed Model.  It is a portable machine-independent 
    sequential structured ASCII file, and is used by SMOKE programs 
    <A HREF = "SMK2EMIS">SMK2EMIS</A> which converts SMOKE lower level 
    emissions file <A HREF = "#EMIS2D">EMIS2D</A> into UAM-ready emissions 
    file <A HREF = "#UAMGTS">UAMGTS</A>, and by
    <A HREF = "#SMK2PTS">SMK2PTS</A> which converts SMOKE upper level 
    emissions file <A HREF = "#EMIS2D">EMIS2D</A> into UAM-ready 
    emissions file <A HREF = "#UAMETS">UAMETS</A>.
    <P> 



<HR> <!---->
<HR> <!---->
    
<H2><A NAME = "cdataset"> Data Set Definitions Common to Multiple
Submodels</A></H2>

Some data sets are used by several of the submodels.  These data sets
are described below.

<UL>
 <li> <a href= "#GRIDDESC"> GRIDDESC</a> (ASCII): Parameters describing 
grid and grid projection (of Earth's surface to the plane of the grid)


 <li> <A HREF = "#ZONES">ZONES</A> (ASCII): Time-zone cross reference 
file (per state/county)

</UL>


<HR> <!---->

<H2> <a name="GRIDDESC"> GRIDDESC </a></H2>

<H3> Overview</H3>
    <b>Description:</b>
    <b>Sequence:</b>
    <b>Type:</b>
    <b>Origin:</b>
    <b>Used by:</b>
    <b>Summary:</b>

<H3>File Format(s)</H3>
    <b>Same as:</b>
    <b>Structure:</b>
    <b>Header:</b>
    <b>Variables:</b>

    <STRONG>GRIDDESC</STRONG> is the <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.LOGICALS.html"> 
    logical name </A> for the EDSS/Models-3 text files which store 
    <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.GRIDS.html#horiz"> horizontal coordinate and 
    grid descriptions,</A> according to EDSS/Models-3 conventions.  It 
    provides a single master site for the storage of all information
    about all of the grids and coordinate systems (map projections) to
    be used in a study (not only for emissions modeling, but for
    meteorology and air quality modeling, as well).  In principle, all
    grid dependencies (e.g., for INCLUDE file parameters or for the grid
    descriptions stored in file headers during file construction)
    should be resolved in terms of data stored in the GRIDDESC file.
    <P> 
    
    GRIDDESC is read by the EDSS/Models-3 
    <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.DSCGRID.html"> DSCGRID() and DSCOORD() </A> 
    utility routines.  It has two segments.  Each 
    segment has a 1-line header (which by convention provides
    titles for the columns in the data records), a sequence 
    of data records, and a terminal record with name field blank
    ('  ').  The first segment is the  <STRONG>coordinate-system-description 
    segment</STRONG> and consists  of text records giving coordinate-system 
    name and  descriptive parameters P_ALP, P_BET, P_GAM, XCENT, and YCENT.  
    The second segment is the <STRONG>grid-description segment</STRONG>, and  
    consists of text records giving grid name, related coordinate-system name 
    and descriptive parameters  XORIG, YORIG, XCELL, YCELL, NCOLS, NROWS, and 
    NTHIK.  
    <P> 
   
    Each data record in these files consists of three list-formatted 
    lines (i.e., items are  separated by either blanks or commas).  
    Name fields are quoted strings.  Numeric fields are given in 
    double precision.
    The records have the following organization, depending upon whether
    they are in the first or second segments:
    <PRE>    
    COORD-NAME
    COORDTYPE, P_ALP, P_BET, P_GAM
    XCENT, YCENT
    
        or
    
    GRID-NAME
    COORD-NAME, XORIG, YORIG, XCELL, YCELL
    NCOLS, NROWS, NTHIK
    </PRE><P> 

    There are at most 32 coordinate systems and 256 grids listed in 
    one of these files.  These files are small enough to be archived
    easily with a study, and have a sufficiently simple format that new
    ones can easily be constructed &quot;by hand.&quot;
    <P>         
   
    EDSS/Models-3 I/O API logical function 
    <A HREF = "http://www.iceis.mcnc.org/EDSS/ioapi/H.DSCGRID.html"> <STRONG>DSCGRID()</STRONG> </A> 
    manages access to GRIDDESC (in fact, serves as an operational 
    definition of the GRIDDESC file format), and gets grid and
    coordinate system descriptive parameters  COORDNAME, P_ALP, P_BET, 
    P_GAM, XCENT, YCENT, XORIG, YORIG, XCELL, YCELL, NCOLS, NROWS, and NTHIK 
    for the specified grid name.  Returns TRUE iff the requested grid 
    is found in the GRIDDESC file.   LOGICAL ENTRY <STRONG>DSCOORD()</STRONG> 
    of DSCGRID() gets coordinate-system descriptive  parameters  
    P_ALP, P_BET, P_GAM, XCENT, and YCENT for the specified coordinate 
    system name (also returning TRUE iff the coordinate system is found
    in the GRIDDESC file).
<P>         

<HR> <!--trailing references .................................  -->

   
<H2> <a name="ZONES"> ZONES </a></H2>

<H3> Overview</H3>
    <b>Description:</b>
    <b>Sequence:</b>
    <b>Type:</b>
    <b>Origin:</b>
    <b>Used by:</b>
    <b>Summary:</b>

<H3>File Format(s)</H3>
    <b>Same as:</b>
    <b>Structure:</b>
    <b>Header:</b>
    <b>Variables:</b>

    ZONES is the emissions prototype's source to time zone conversion file,
    used for mapping states and counties to time zones by FIPS code.  It is an
    ASCII file used by temporal modeling programs  <A HREF = "AREA.html#RAWAREA">
    RAWAREA</A>, <A HREF = "MOBILE.html#RAWMOBIL"> RAWMOBIL</A>, and  <A HREF =
    "POINT.html#RAWPOINT"> RAWPOINT</A> to map emissions sources to their respective
    time zones.  It consists of a sequence of list-formatted (i.e.,
    delimited with a space, comma, or other) lines of the form

    <BLOCKQUOTE><VAR> 
    &lt;FIPS code&gt;  &lt;time zone&gt;
    </VAR></BLOCKQUOTE>
    The interpretation of the lines in terms of the FIPS field they 
    contain is as follows:
    <UL> 
        <LI>  <STRONG>00000</STRONG>:  apply the indicated time 
                                       zone to all sources
        <LI>  <STRONG>ss000</STRONG>:  apply the indicated time 
                                       zone to all sources in
                                       <STRONG>state ss</STRONG>
        <LI>  <STRONG>ssccc</STRONG>:  apply the indicated time 
                                       zone to all sources in
                                       <STRONG>state ss and 
                                       county ccc</STRONG>
    </UL>
    Processing of this file follows Painter's Algorithm, i.e., later 
    entries in the file override earlier ones when appropriate, so the 
    order of entries should go from most general (least specific) to 
    most specific.  Note that the standard ordering of the ASCII 
    character set (in which zero is the first of the digit characters) 
    implies that sorting this file by FIPS field puts it into an 
    appropriate order to apply Painter's Algorithm.  
    <P> 
    
    Note also that the <STRONG>time zones for the US</STRONG> for Standard
    Time are the  following (numbered in terms of numbers of hours west of 
    Greenwich Mean Time (GMT)):
    <UL> 
        <LI>  <STRONG>5</STRONG>:  Eastern
        <LI>  <STRONG>6</STRONG>:  Central
        <LI>  <STRONG>7</STRONG>:  Mountain
        <LI>  <STRONG>8</STRONG>:  Pacific
    </UL>
    Daylight savings time zones are lower by one (for example, Eastern
    Daylight Time is Zone 4).
    Note also that the modeling of regions including areas which do not
    implement daylight savings time will need two distinct ZONES files,
    one for the summer, and the other for the winter (one specifying,
    for example, that Indianapolis is Zone 5 in the winter, but Zone 6
    in the summer).
    


<HR> <!--trailing references .................................  -->

<A HREF = "index.html#models">
<STRONG>UP: Models  -- Area, Point, Biogenic, Mobile </STRONG> 
</A>
<P> 

<A HREF = "BIOGENIC.html">  
<STRONG>Previous: Biogenic Emissions Processing </STRONG>  
</A>
<P> 

<A HREF = "RAWDATA.html"> 
<STRONG>Next: Raw (input) Data Requirements and Procedures </STRONG>  
</A>
<P> 
                      
<A HREF = "index.html#contents"> 
<STRONG>Top: </STRONG>  
SMOKE Root Document  </A>
<P> 


</BODY>      <!--end body  -->
</HTML>      <!--end html  -->

