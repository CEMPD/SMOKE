#!/bin/csh -f

# This scripts tests Smkinven for a variety of input file formats and
# source categories, and compares to the results achived previously.

# General settings
setenv RUN_SMKINVEN Y

set debugmode = Y

# Dependent settings
if ( $debugmode == Y ) then
   set command = 'dbx $IV_SRC/smkinven.debug'
else
   setenv PROMPTFLAG N
   set command = $SMK_BIN/smkinven
endif

# Case descriptions
# Case 1: m3demo case (IDA input formats for area, mobile, and point sources)
# Case 2: Texas case (EPS input formats for area and point sources)
# Case 3: Utah case (EMS-95 input formats for ar,mb,& pt sources, w/day-spec pt)

# Case controls
set case1_ar = N
set case1_mb = N
set case1_pt = N

set case2_ar = N
set case2_pt = N

set case3_ar = N
set case3_mb = N
set case3_pt = Y

# Case 1
########################################################################

if ( $case1_ar == Y ) then

    setenv SMK_SOURCE A
    source /env/proj/smoke/assigns/ASSIGNS.m3demo.cb-iv.ed36

    $command 

endif

if ( $case1_mb == Y ) then

    setenv SMK_SOURCE M
    setenv WKDAY_NORMALIZE      Y
    setenv SMK_USE_SIPOLS Y
    setenv SMK_USE_ACTVNAMS Y
    source /env/proj/smoke/assigns/ASSIGNS.m3demo.cb-iv.ed36

    $command 

endif

if ( $case1_pt == Y ) then

    setenv SMK_SOURCE P
    source /env/proj/smoke/assigns/ASSIGNS.m3demo.cb-iv.ed36

    setenv TMPLOG $LOGS/smkinven.pt.$INVEN.log
    source $SCRIPTS/run/movelog.scr
    setenv LOGFILE $TMPLOG
    $command 

endif


# Case 2
########################################################################

if ( $case2_ar == Y ) then

    setenv SMK_SOURCE A

    $command 

endif

if ( $case2_pt == Y ) then

    setenv SMK_SOURCE P
    setenv WKDAY_NORMALIZE      Y
    setenv IMPORT_AVEINV_YN     N 
    setenv HOUR_SPECIFIC_YN     Y
    setenv DAY_SPECIFIC_YN      Y
    setenv INVDIR /env/data/smoke/inventory/dfw96
    setenv INVOPD /env/data/smoke/inventory/dfw96ba
    setenv PTINV  $INVDIR/pnlst.v1.dfw96.txt
    setenv PTDAY  $INVDIR/ptday.dfw96.txt
    setenv PTHOUR $INVDIR/pthour.dfw96.txt
    setenv SIPOLS $INVDIR/sipols.txt
    setenv COSTCY /env/data/smoke/ge_dat/costcy.txt
    setenv PSCC   $INVOPD/PSCC.dfw96ba02.txt
    setenv PSRC   $INVOPD/PSRC.dfw96ba02.txt
    setenv PNTS   $INVOPD/pnts.dfw96ba02.ncf
    setenv PDAY   $INVOPD/pday.dfw96ba02.ncf        
    setenv PHOUR  $INVOPD/phour.dfw96ba02.ncf
    setenv PSTK   /env/data/smoke/ge_dat/stack_defaults_old.txt

    $command 

endif

# Case 3
########################################################################

set day = 0213
set jday = 044
set ard = 213
set mbd = feb13


if ( $case3_ar == Y ) then

    setenv SMK_SOURCE A
    source $ASSIGNS/ASSIGNS.aero96.ut_aero
    setenv WKDAY_NORMALIZE      Y
    setenv SMKINVEN_FORMULA     "FAKE=PM10-NH3"
    setenv OUTZONE              7
    setenv AREA $INVOPD/area.faketest.ncf
    setenv ASRC $INVOPD/ASRC.faketest.ncf
    setenv ASCC $INVOPD/ASCC.faketest.ncf

    $command 

endif

if ( $case3_mb == Y ) then

    setenv SMK_SOURCE M
    source $ASSIGNS/ASSIGNS.aero96.ut_aero
    setenv WKDAY_NORMALIZE      Y
    setenv OUTZONE              7
    setenv SMK_USE_SIPOLS       Y
    setenv SMK_USE_ACTVNAMS     N

    $command 

endif

if ( $case3_pt == Y ) then

    setenv SMK_SOURCE P
    source $ASSIGNS/ASSIGNS.aero96.ut_aero
    setenv WKDAY_NORMALIZE      Y
    setenv IMPORT_AVEINV_YN     N 
    setenv HOUR_SPECIFIC_YN     N
    setenv DAY_SPECIFIC_YN      Y
    setenv OUTZONE              7

    $command 

endif
