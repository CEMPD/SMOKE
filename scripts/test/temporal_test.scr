#!/bin/csh -f

# This scripts tests Temporal for a variety of input file formats and
# source categories, and compares to the results achived previously.

# General settings
setenv RUN_TEMPORAL Y
setenv REPORT_DEFAULTS N
setenv PROMPTFLAG N

set debugmode = Y

# Dependent settings
if ( $debugmode == Y ) then
   set command = 'dbx $TM_SRC/temporal.debug'
else
   set command = '$SMK_BIN/temporal
endif

# Case descriptions
# Case 1: m3demo case (IDA input formats for area, mobile, and point sources)
# Case 2: Texas case (EPS input formats for area and point sources)
# Case 3: Utah case (EMS-95 input formats for ar,mb,& pt sources, w/day-spec pt)
# Case 4: 1996 NET

# Case controls
set case1_ar = N
set case1_mb = N
set case1_pt = N

set case2_ar = N
set case2_pt = N

set case3_ar = N
set case3_mb = N
set case3_pt = N

set case4_ar = N
set case4_mb = Y
set case4_pt = N

# Case 1
########################################################################

setenv RENORM_TPROF         Y     # Y renormalizes temporal profiles
setenv UNIFORM_TPROF_YN     N     # Y makes all temporal profiles uniform
setenv ZONE4WM              Y     # Y uses time zones for start of day & month

if ( $case1_ar == Y ) then

    setenv SMK_SOURCE A
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.m3demo.cb-iv.ed36

    $command 

endif

if ( $case1_mb == Y ) then

    setenv SMK_SOURCE M
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.m3demo.cb-iv.ed36

    $command 

endif

if ( $case1_pt == Y ) then

    setenv SMK_SOURCE P
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.m3demo.cb-iv.ed36

    $command 

endif


# Case 2
########################################################################

if ( $case2_ar == Y ) then

    setenv SMK_SOURCE A

    $command 

endif

if ( $case2_pt == Y ) then

    setenv SMK_SOURCE P
    setenv WKDAY_NORMALIZE      Y
    setenv IMPORT_AVEINV_YN     N 
    setenv HOUR_SPECIFIC_YN     Y
    setenv DAY_SPECIFIC_YN      Y
    setenv INVDIR /env/data/smoke/inventory/dfw96
    setenv INVOPD /env/data/smoke/inventory/dfw96ba
    setenv PTINV  $INVDIR/pnlst.v1.dfw96.txt
    setenv PTDAY  $INVDIR/ptday.dfw96.txt
    setenv PTHOUR $INVDIR/pthour.dfw96.txt
    setenv SIPOLS $INVDIR/sipols.txt
    setenv COSTCY /env/data/smoke/ge_dat/costcy.txt
    setenv PSCC   $INVOPD/PSCC.dfw96ba02.txt
    setenv PSRC   $INVOPD/PSRC.dfw96ba02.txt
    setenv PNTS   $INVOPD/pnts.dfw96ba02.ncf
    setenv PDAY   $INVOPD/pday.dfw96ba02.ncf        
    setenv PHOUR  $INVOPD/phour.dfw96ba02.ncf
    setenv PSTK   /env/data/smoke/ge_dat/stack_defaults_old.txt

    $command 

endif

# Case 3
########################################################################


if ( $case3_ar == Y ) then

    setenv SMK_SOURCE A
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.aero96.ut_aero

    $command 

endif

if ( $case3_mb == Y ) then

    setenv SMK_SOURCE M
    setenv SMK_O3SEASON_YN      Y     # Y uses O3-season emissions instead of annual
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.aero96.ut_aero

    $command 

endif

if ( $case3_pt == Y ) then

    setenv SMK_SOURCE P
    setenv DAY_SPECIFIC_YN      Y
    setenv OUTZONE              7
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.aero96.ut_aero

    $command 

endif

# Case 4
########################################################################


if ( $case4_ar == Y ) then

    setenv SMK_SOURCE A
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.net96.us36

    $command 

endif

if ( $case4_mb == Y ) then

    setenv SMK_SOURCE M
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.net96.us36
    setenv REPORT_DEFAULTS Y

    $command 

endif

if ( $case4_pt == Y ) then

    setenv SMK_SOURCE P
    source /env/proj/smoke/work/mrh/assigns/ASSIGNS.net96.us36

    $command 

endif
